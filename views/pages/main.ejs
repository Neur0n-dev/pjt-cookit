<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cookit</title>
    <link rel="icon" type="image/png" sizes="32x32" href="/assets/cookit_face_32.png">
    <link rel="stylesheet" href="/css/common.css?v=<%= Date.now() %>">
    <link rel="stylesheet" href="/css/header.css?v=<%= Date.now() %>">
    <link rel="stylesheet" href="/css/footer.css?v=<%= Date.now() %>">
    <link rel="stylesheet" href="/css/main.css?v=<%= Date.now() %>">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/toastify-js/src/toastify.min.css">
</head>
<body>
    <!-- 헤더  -->
    <%- include('../partials/header') %>

    <main class="container">
        <!-- 히어로 섹션 -->
        <section class="hero">
            <div class="hero-badge">🍳 Personal Project · Neuron Engine</div>
            <h1 class="hero-title">
                냉장고 속 재료로<br>
                오늘의 메뉴를 완성하세요.
            </h1>
            <p class="hero-desc">
                재료만 입력하면<span class="hero-brand"> Cook<span class="header-title-accent">it</span></span>이<br>
                지금 만들 수 있는 최적의 메뉴를 제안합니다.
            </p>
        </section>

        <!-- 2컬럼 레이아웃 -->
        <section class="content-grid">
            <!-- 왼쪽: 재료 입력 -->
            <div class="input-card">
                <label class="input-label">재료 · 키워드</label>

                <div class="tag-box" id="tag-box">
                    <input class="tag-input" id="ingredient-input" type="text">
                </div>
                <p class="input-hint">재료(양파, 감자)나 키워드(한식, 중식)를 자유롭게 입력 · Enter로 추가 · Backspace로 삭제</p>

                <!-- 나의 재료 (DB) -->
                <div class="my-ingredient" id="my-ingredient">
                    <div class="my-ingredient-head">
                        <span class="my-ingredient-title">🧊 나의 재료</span>
                        <div class="my-ingredient-meta">
                            <span id="my-ingredient-count">0개</span>
                        </div>
                    </div>
                    <div class="my-ingredient-list" id="my-ingredient-list"></div>
                    <p class="my-ingredient-hint">버튼을 누르면 재료 입력창에 자동 추가됩니다.</p>
                </div>

                <!-- 식단 모드 + 추천 개수 -->
                <div class="option-group">
                    <div class="option-row">
                        <span class="option-label">식단 모드</span>
                        <div class="chip-group" id="mode-group">
                            <button class="chip active" data-mode="balance" type="button">밸런스</button>
                            <button class="chip" data-mode="diet" type="button">다이어트</button>
                            <button class="chip" data-mode="simple" type="button">초간단</button>
                        </div>
                    </div>

                    <div class="count-row">
                        <span class="count-label">추천 개수</span>
                        <div class="count-group" id="count-group">
                            <button class="count-chip active" data-count="3" type="button">3</button>
                            <button class="count-chip" data-count="6" type="button">6</button>
                            <button class="count-chip" data-count="9" type="button">9</button>
                        </div>
                    </div>
                </div>

                <!-- 버튼 -->
                <div class="action-row">
                    <button class="btn-reset" id="btn-reset" type="button">초기화</button>
                    <button class="btn-recommend" id="btn-recommend" type="button">레시피 추천</button>
                </div>

                <!-- 상태 메시지 -->
                <div class="status-text" id="status-text">재료를 입력해 주세요.</div>
            </div>

            <!-- 오른쪽: 추천 결과 미리보기 -->
            <aside class="preview-card" id="preview-card">
                <div class="preview-head">
                    <div>
                        <h3 class="preview-title" id="preview-title">추천 결과 미리보기</h3>
                        <p class="preview-sub" id="preview-sub">카드 클릭 → 아래 상세로 이동</p>
                    </div>
                    <span class="preview-badge" id="preview-count">0개</span>
                </div>

                <!-- 탭: 추천 / 즐겨찾기 -->
                <div class="preview-tabs" id="preview-tabs">
                    <button class="preview-tab active" data-tab="recommend" type="button">추천</button>
                    <button class="preview-tab" data-tab="favorite" type="button">
                        즐겨찾기 <span class="preview-tab-count" id="fav-count">0</span>
                    </button>
                </div>

                <!-- 즐겨찾기 검색 (즐겨찾기 탭 활성화 시 표시) -->
                <div class="preview-search" id="fav-search" style="display:none;">
                    <input class="preview-search-input" id="fav-search-input" type="text" placeholder="즐겨찾기 검색 (제목/태그)">
                    <button class="btn-small" id="fav-search-clear" type="button">지우기</button>
                </div>

                <!-- 요약 -->
                <div class="preview-summary">
                    <div class="summary-box">
                        <span class="summary-label">추천 수</span>
                        <span class="summary-value" id="summary-count">0개</span>
                    </div>
                    <div class="summary-box">
                        <span class="summary-label">평균 조리시간</span>
                        <span class="summary-value" id="summary-avg-time">-</span>
                    </div>
                    <div class="summary-box">
                        <span class="summary-label">부족 재료 TOP</span>
                        <span class="summary-value" id="summary-missing-top">-</span>
                    </div>
                </div>

                <!-- 레시피 카드 리스트 -->
                <div class="preview-scroll">
                    <div class="preview-list" id="preview-list"></div>
                </div>
            </aside>
        </section>

        <!-- 상세 레시피 -->
        <section class="detail" id="detail-section">
            <div class="detail-head">
                <h2 class="detail-section-title">상세 레시피</h2>
                <span class="detail-sub" id="detail-sub">추천 결과에서 카드를 선택해주세요</span>
            </div>

            <div class="detail-card" id="detail-card"></div>
        </section>
    </main>

    <!-- 푸터 -->
    <%- include('../partials/footer') %>

    <script src="https://cdn.jsdelivr.net/npm/toastify-js"></script>
    <script src="/js/header.js?v=<%= Date.now() %>"></script>
    <script src="/js/footer.js?v=<%= Date.now() %>"></script>
    <script src="/js/main.js?v=<%= Date.now() %>"></script>
</body>
</html>